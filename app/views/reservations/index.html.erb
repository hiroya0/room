<header>
<h2>Potepan Shere</h2>
<div class = wrapper>
    <div class = box_wrapper>  
    <input type="checkbox" id="tab1"/>
    <label for="tab1">
    <%= current_user.nickname %>
        <% if current_user.image? %>  
        <div><%= image_tag current_user.image.url,size: "100x100" %></div>
        <% else %>
        <div><%= image_tag "https://rails-02-sample.herokuapp.com/assets/common/default-avatar-7a6cbfd7993e89f24bfc888f4a035a83c6f1428b8bdc47eed9095f2799a40153.png" %></div>
        <% end %>
    </label>

        <ul>
            <li><a><%= link_to "ログアウト", destroy_user_session_path, method: :delete, class: "text-white" %></a></li>
            <li><a><%= link_to "部屋の新規登録", "/rooms/new" %></a></li>
            <li><a><%= link_to "部屋の登録済み一覧", "/rooms/" %></a></li>
            <li><a><%= link_to "予約一覧", "/reservations/" %></a></li>
            <li><a><%= link_to "アカウント設定", "/users/show" %></a></li>
            
        </ul>
    </div>
    
</div>
</header>
<% if flash[:success] %>
   <p class="notice"><%= flash[:success] %></p>
 <% end %>
<h2>予約履歴</h2>
<a href="javascript:history.back()">[戻る]</a>
<table>
<thead>
  <th>予約した部屋</th>
  <th>部屋名</th>
  <th>予約人数</th>
  <th>チェックイン</th>
  <th>チェックアウト</th>
  <th>合計金額</th>
  <th>予約確定日時</th>
 </tr>
</thead>
 
<tbody>
 <tr>
 <% @reservations.each do |reservation| %>
  
  <td><%= image_tag reservation.room.room_image.url,size: "200x150" %></td>
  <td><%= reservation.room.name  %></td>
  <td><%= reservation.people  %></td>
  <td><%= reservation.startday  %></td>
  <td><%= reservation.endday %></td>
  <td><%= reservation.room.price * reservation.people * (reservation.endday - reservation.startday).to_i %></td>
  <td><%= reservation.created_at.to_s(:datetime_jp) %></td>
  <td><%= link_to "削除", reservation, method: :delete, 
         data: { confirm: "本当に削除しますか？" } %> </td>
</tr>
<% end %>
<%= form_with model: @reservation, url: reservations_path, local: true do |f| %>
  <%= f.hidden_field :user_id %>
  <%= f.hidden_field :startday %>
  <%= f.hidden_field :endday %>
  <%= f.hidden_field :people %>
<% end %>


</tbody>
</table>
